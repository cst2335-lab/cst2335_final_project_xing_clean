#!/bin/bash
# generate_docs.sh
# Script to generate complete project documentation

  echo "ğŸš€ Starting documentation generation for Car Management System..."
  
  # Step 1: Clean previous builds
  echo "ğŸ§¹ Cleaning previous builds..."
  flutter clean
  
  # Step 2: Get dependencies
  echo "ğŸ“¦ Getting dependencies..."
  flutter pub get
  
  # Step 3: Generate Floor database code
  echo "ğŸ”§ Generating Floor database code..."
  flutter packages pub run build_runner build --delete-conflicting-outputs
  
  if [ $? -ne 0 ]; then
  echo "âŒ Error generating Floor code. Exiting."
  exit 1
  fi
  
  # Step 4: Remove old documentation
  echo "ğŸ—‘ï¸  Removing old documentation..."
  rm -rf dartdoc/
  
  # Step 5: Generate Dartdoc documentation
  echo "ğŸ“š Generating Dartdoc documentation..."
  dart doc
  
  if [ $? -ne 0 ]; then
  echo "âŒ Error generating documentation. Exiting."
  exit 1
  fi
  
  # Step 6: Success message
  echo "âœ… Documentation generated successfully!"
  echo "ğŸ“– Open dartdoc/index.html to view documentation"
echo "ğŸŒ You can also serve it locally with: python -m http.server 8000 --directory dartdoc"

# Optional: Open documentation automatically (uncomment for macOS)
# open dartdoc/index.html

# Optional: Open documentation automatically (uncomment for Windows)
# start dartdoc/index.html

# Optional: Open documentation automatically (uncomment for Linux)
# xdg-open dartdoc/index.html