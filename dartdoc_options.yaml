#!/bin/bash
# generate_docs.sh
# Script to generate complete project documentation

  echo "🚀 Starting documentation generation for Car Management System..."
  
  # Step 1: Clean previous builds
  echo "🧹 Cleaning previous builds..."
  flutter clean
  
  # Step 2: Get dependencies
  echo "📦 Getting dependencies..."
  flutter pub get
  
  # Step 3: Generate Floor database code
  echo "🔧 Generating Floor database code..."
  flutter packages pub run build_runner build --delete-conflicting-outputs
  
  if [ $? -ne 0 ]; then
  echo "❌ Error generating Floor code. Exiting."
  exit 1
  fi
  
  # Step 4: Remove old documentation
  echo "🗑️  Removing old documentation..."
  rm -rf dartdoc/
  
  # Step 5: Generate Dartdoc documentation
  echo "📚 Generating Dartdoc documentation..."
  dart doc
  
  if [ $? -ne 0 ]; then
  echo "❌ Error generating documentation. Exiting."
  exit 1
  fi
  
  # Step 6: Success message
  echo "✅ Documentation generated successfully!"
  echo "📖 Open dartdoc/index.html to view documentation"
echo "🌐 You can also serve it locally with: python -m http.server 8000 --directory dartdoc"

# Optional: Open documentation automatically (uncomment for macOS)
# open dartdoc/index.html

# Optional: Open documentation automatically (uncomment for Windows)
# start dartdoc/index.html

# Optional: Open documentation automatically (uncomment for Linux)
# xdg-open dartdoc/index.html